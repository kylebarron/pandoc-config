%--------------------------------------------------------------
% TODO(mauricio): Option so it runs on server // Wed 07 Oct 2015 04:28:40 PM EDT

%--------------------------------------------------------------
% standard heading

\NeedsTeXFormat{LaTeX2e}               % Standard
\RequirePackage[l2tabu, orthodox]{nag} % nag me about things

% ---------------------------------------------------------------------
% Packages

\usepackage{color}                         % Colors!
\usepackage[titletoc]{appendix}            % Appendices environment
\usepackage{amsfonts}                      % prettier math---
\usepackage{amsthm}                        % and it has theorems and such.
\usepackage{graphicx}                      % Graphicx
\usepackage{pdflscape}                     % Landscape between non-landscape
\usepackage{geometry}                      % Page layout
\usepackage{tocloft}                       % ToC options
\usepackage{booktabs}                      % Pretty tables
\usepackage{longtable}                     % Long table
\usepackage{caption}                       % Caption control
\usepackage{multirow}                      % Multiple rows in tables
\usepackage{mathdesign}                    % extra math symbols
\usepackage{mathtools}                     % even more
\usepackage{array}                         % Array options
\usepackage{cprotect}                      % Use verbatim within other places
\usepackage{float}                         % Float options
\usepackage{tabularx}                      % Tabular with nice width options
\usepackage{chngcntr}                      % Change table counters
\usepackage{hyperref}                      % References with hyperlinks
\usepackage{titletoc}                      % ToC options
\usepackage{natbib}                        % Better citation
\usepackage[nameinlink,noabbrev]{cleveref} % Semantic figure ref
\usepackage[hang,flushmargin]{footmisc}    % Nice footnotes
\usepackage{dcolumn}                       % Align on decimal point in tables
\newcolumntype{d}[1]{D{.}{.}{#1}}

\ifxetex
  \usepackage{microtype}
  \usepackage{fontspec}
\else
  \usepackage[T1]{fontenc}
\fi

% ---------------------------------------------------------------------
% Options

\hypersetup{
  colorlinks,
  allbordercolors=white,
  allcolors=[rgb]{0.05 0.2 0.4},
}

\hypersetup{
  colorlinks,
  allbordercolors=white,
  allcolors=[rgb]{0.05 0.2 0.5},
}

\linespread{1.05}                % Space between lines
\setlength{\parindent}{0pt}      % Indent in first line of paragraph
\setlength{\parskip}{9pt}        % Skip between paragraphs
\renewcommand\arraystretch{1.1}  % Array spacing
\allowdisplaybreaks              % Can break math environments
\interfootnotelinepenalty=10000  % Don't break footnotes across pages
\setlength{\footnotemargin}{2mm} % Footnote margin
\setlength{\skip\footins}{0.5cm} % Space from text to footnote
\setlength{\footnotesep}{9pt}    % Space between footnotes
\counterwithin{table}{section}   % Count tables within sections
\counterwithin{figure}{section}  % Count figures within sections

% ---------------------------------------------------------------------
% Commands

\makeatletter  % Lone tables appear on top
\setlength{\@fptop}{0pt}
\makeatother

\newcommand{\simprox}{$\scriptstyle\sim$}
\newcommand{\linksto}{$\scriptstyle\nearrow$}

% Hyperlink to table of contents
\newcommand{\uptotoc}[1][toc:toc]{
  \hyperref[#1]{{\sffamily\itshape $\uparrow$ Back to ToC}}}

% Captions are in footnotesize
\newcommand{\footcaption}{
  \captionsetup[table]{labelfont={footnotesize}, textfont={footnotesize}}}

% Captions are in normal size
\newcommand{\normalcaption}{
  \captionsetup[table]{labelfont={}, textfont={}}}

% Dot spacing from title to page number
\renewcommand{\cftdotsep}{3}
\renewcommand{\cfttabdotsep}{3}
\renewcommand{\cftfigdotsep}{3}
\renewcommand{\cftsecleader}{\cftdotfill{\cftdotsep}}

% Table and figure titles and page numbers in ToC are footnotesize
\renewcommand\cfttabfont{\footnotesize}
\renewcommand\cfttabpagefont{\footnotesize}
\renewcommand\cftfigfont{\footnotesize}
\renewcommand\cftfigpagefont{\footnotesize}

% ToC title
\renewcommand{\listtablename}{\Large List of Tables}
\renewcommand{\listfigurename}{\Large List of Figures}

% Section and subsection numbering
\renewcommand\thesection{\arabic{section}}
\renewcommand\thesubsection{\arabic{section}.\arabic{subsection}\normalsize}

% Wrapped columns
\newcolumntype{L}[1]{>{\raggedright\let\newline\\\arraybackslash\hspace{0pt}}m{#1}}
\newcolumntype{C}[1]{>{\centering\let\newline\\\arraybackslash\hspace{0pt}}m{#1}}
\newcolumntype{R}[1]{>{\raggedleft\let\newline\\\arraybackslash\hspace{0pt}}m{#1}}
\newcolumntype{Q}{>{\centering\arraybackslash}X}
% \newcolumntype{P}{>{\raggedright\let\newline\\\arraybackslash\hspace{0pt}}}
% \newcolumntype{P}{>{\raggedright\arraybackslash}}
